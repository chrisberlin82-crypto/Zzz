; ============================================================
; MedReception — PJSIP Konfiguration
; Asterisk SIP-Trunks und Extensions
; ============================================================

; --- Transport ---
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060

[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5060

; --- SIP-Trunk Template ---
; Anpassen an euren SIP-Provider (sipgate, placetel, etc.)
[trunk-template](!)
type=endpoint
context=eingehend
disallow=all
allow=alaw
allow=ulaw
allow=g722
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
ice_support=yes
media_encryption=sdes
trust_id_inbound=yes

; --- SIP-Trunk (ANPASSEN!) ---
[sip-trunk]
type=registration
outbound_auth=sip-trunk-auth
server_uri=sip:PROVIDER-HOST:5060
client_uri=sip:BENUTZERNAME@PROVIDER-HOST:5060
retry_interval=60

[sip-trunk-auth]
type=auth
auth_type=userpass
username=BENUTZERNAME
password=PASSWORT

[sip-trunk-aor]
type=aor
contact=sip:PROVIDER-HOST:5060
qualify_frequency=30

[sip-trunk-endpoint](trunk-template)
type=endpoint
aors=sip-trunk-aor
outbound_auth=sip-trunk-auth
from_domain=PROVIDER-HOST
from_user=BENUTZERNAME

[sip-trunk-identify]
type=identify
endpoint=sip-trunk-endpoint
match=PROVIDER-IP

; --- Agenten-Extensions Template ---
[agent-template](!)
type=endpoint
context=intern
disallow=all
allow=alaw
allow=ulaw
allow=g722
allow=opus
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
callerid_privacy=allowed_not_screened
trust_id_inbound=yes
device_state_busy_at=1
dtmf_mode=rfc4733

; --- Extension 100–119: Agenten (ANPASSEN!) ---
[100]
type=auth
auth_type=userpass
username=100
password=agent100!

[100](agent-template)
auth=100
aors=100
callerid="Agent 1" <100>

[100]
type=aor
max_contacts=2
remove_existing=yes
qualify_frequency=30

; Weitere Agenten nach gleichem Schema:
; [101], [102], ... bis [119]

; --- Extension 200: Voicebot (intern) ---
[voicebot]
type=endpoint
context=voicebot
disallow=all
allow=alaw
allow=ulaw
transport=transport-udp

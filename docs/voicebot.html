<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voicebot – MedReception</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo" onclick="location.href='admin-dashboard.html'"><div class="icon">M</div><span>MedReception</span></div>
        <div class="nav-group">Übersicht</div>
        <nav class="sidebar-nav">
            <a href="admin-dashboard.html"><i class="fa-solid fa-chart-pie nav-icon"></i> Dashboard</a>
        </nav>
        <div class="nav-group">Callcenter</div>
        <nav class="sidebar-nav">
            <a href="agenten.html"><i class="fa-solid fa-headset nav-icon"></i> Agenten</a>
            <a href="voicebot.html" class="active"><i class="fa-solid fa-robot nav-icon"></i> Voicebot</a>
            <a href="ansagen.html"><i class="fa-solid fa-tower-broadcast nav-icon"></i> Ansagen</a>
            <a href="callflow.html"><i class="fa-solid fa-diagram-project nav-icon"></i> Callflow</a>
        </nav>
        <div class="nav-group">Telefonie</div>
        <nav class="sidebar-nav">
            <a href="asterisk.html"><i class="fa-solid fa-server nav-icon"></i> Asterisk</a>
            <a href="acd.html"><i class="fa-solid fa-phone-volume nav-icon"></i> ACD</a>
        </nav>
        <div class="nav-group">Praxis</div>
        <nav class="sidebar-nav">
            <a href="termine.html"><i class="fa-solid fa-calendar-days nav-icon"></i> Termine</a>
            <a href="auswertung.html"><i class="fa-solid fa-chart-line nav-icon"></i> Auswertungen</a>
        </nav>
        <div class="nav-group">KI</div>
        <nav class="sidebar-nav">
            <a href="ai-agent.html"><i class="fa-solid fa-microchip nav-icon"></i> AI Agent</a>
        </nav>
        <div class="sidebar-footer">
            <button onclick="sessionStorage.removeItem('mr_guard_session');location.href='index.html'" type="button"><i class="fa-solid fa-right-from-bracket nav-icon"></i> Abmelden</button>
        </div>
    </aside>
    <div class="main-wrapper">
        <header class="topbar">
            <button id="menu-toggle" type="button"><i class="fa-solid fa-bars"></i></button>
            <h1><i class="fa-solid fa-robot"></i> Voicebot</h1>
            <div class="topbar-right">
                <span class="status-indicator status-online" id="voicebot-status"><i class="fa-solid fa-circle"></i> Aktiv</span>
            </div>
        </header>
        <main>
            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-icon bg-primary"><i class="fa-solid fa-phone-volume"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="vb-stat-anrufe">47</div>
                        <div class="stat-label">Anrufe heute</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon bg-success"><i class="fa-solid fa-calendar-check"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="vb-stat-termine">12</div>
                        <div class="stat-label">Termine gebucht</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon bg-info"><i class="fa-solid fa-prescription"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="vb-stat-rezepte">8</div>
                        <div class="stat-label">Rezept-Anfragen</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon bg-warning"><i class="fa-solid fa-right-left"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="vb-stat-transfers">27</div>
                        <div class="stat-label">Weiterleitungen</div>
                    </div>
                </div>
            </div>

            <div class="voicebot-grid">
                <section class="card">
                    <h2><i class="fa-solid fa-gear"></i> Voicebot Konfiguration</h2>
                    <form id="voicebot-config-form">
                        <div class="form-group">
                            <label for="vb-begruessung">Begruessung</label>
                            <textarea id="vb-begruessung" rows="3">Willkommen bei der Arztpraxis MED Rezeption. Druecken Sie 1 fuer Terminvergabe, 2 fuer Rezeptbestellung, 3 fuer die Rezeption.</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="vb-sprache">Sprache</label>
                                <select id="vb-sprache">
                                    <option value="de-DE" selected>Deutsch</option>
                                    <option value="en-US">English</option>
                                    <option value="tr-TR">Tuerkisch</option>
                                    <option value="ar-SA">Arabisch</option>
                                    <option value="ru-RU">Russisch</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="vb-stimme">Stimme</label>
                                <select id="vb-stimme">
                                    <option value="weiblich" selected>Weiblich</option>
                                    <option value="maennlich">Maennlich</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="vb-max-versuche">Max. Wiederholungen</label>
                                <input type="number" id="vb-max-versuche" value="2" min="1" max="5">
                            </div>
                            <div class="form-group">
                                <label for="vb-timeout">Timeout (Sek.)</label>
                                <input type="number" id="vb-timeout" value="8" min="3" max="30">
                            </div>
                        </div>
                        <h3>DTMF-Menue Zuordnung</h3>
                        <div class="form-group">
                            <label>Taste 1</label>
                            <select id="vb-taste1">
                                <option value="termin" selected>Terminvergabe (Voicebot)</option>
                                <option value="warteschlange">Warteschlange</option>
                                <option value="transfer">Transfer zu Nebenstelle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Taste 2</label>
                            <select id="vb-taste2">
                                <option value="rezept" selected>Rezeptbestellung (Voicebot)</option>
                                <option value="warteschlange">Warteschlange</option>
                                <option value="transfer">Transfer zu Nebenstelle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Taste 3</label>
                            <select id="vb-taste3">
                                <option value="transfer" selected>Transfer Rezeption</option>
                                <option value="warteschlange">Warteschlange</option>
                                <option value="termin">Terminvergabe (Voicebot)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Taste 0</label>
                            <select id="vb-taste0">
                                <option value="warteschlange" selected>Warteschlange Rezeption</option>
                                <option value="transfer">Transfer</option>
                            </select>
                        </div>
                        <div class="button-gruppe">
                            <button type="submit"><i class="fa-solid fa-save"></i> Konfiguration speichern</button>
                            <button type="button" id="btn-vb-test" class="btn-success-sm"><i class="fa-solid fa-vial"></i> Voicebot testen</button>
                            <a href="voicebot-live.html" style="display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:#2563eb;color:#fff;border-radius:6px;text-decoration:none;font-size:0.9rem;font-weight:600"><i class="fa-solid fa-microphone"></i> Live-Test (WebRTC)</a>
                        </div>
                    </form>
                    <div id="vb-config-erfolg" class="ergebnis" hidden></div>
                </section>

                <section class="card">
                    <h2><i class="fa-solid fa-clock-rotate-left"></i> Letzte Voicebot-Anrufe</h2>
                    <div id="voicebot-anrufe-liste">
                        <!-- wird per JS geladen -->
                    </div>
                </section>
            </div>

            <section class="card" id="voicebot-test-bereich" hidden>
                <h2><i class="fa-solid fa-vial"></i> Voicebot Test-Dialog</h2>
                <div class="voicebot-test-chat" id="vb-test-chat">
                    <!-- Test-Dialog wird hier gerendert -->
                </div>
                <div class="voicebot-test-eingabe">
                    <div class="vb-dtmf-tasten">
                        <button type="button" class="vb-dtmf" data-dtmf="1">1</button>
                        <button type="button" class="vb-dtmf" data-dtmf="2">2</button>
                        <button type="button" class="vb-dtmf" data-dtmf="3">3</button>
                        <button type="button" class="vb-dtmf" data-dtmf="0">0</button>
                    </div>
                    <button type="button" id="btn-vb-test-reset"><i class="fa-solid fa-rotate-right"></i> Neustart</button>
                </div>
            </section>
        </main>
    </div>
    <button id="chat-toggle" type="button"><i class="fa-solid fa-comment-dots"></i></button>
    <div id="chat-fenster">
        <div class="chat-header"><span><i class="fa-solid fa-robot"></i> Praxis-Assistent</span><button id="chat-schliessen" type="button"><i class="fa-solid fa-xmark"></i></button></div>
        <div id="chat-nachrichten"></div>
        <div class="chat-eingabe">
            <input id="chat-input" type="text" placeholder="Frage stellen oder sprechen...">
            <button id="chat-mikrofon" type="button" title="Sprechen"><i class="fa-solid fa-microphone"></i></button>
            <button id="chat-senden" type="button"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zzz Platform - AI Agents</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="style.css">
<style>
  .flow-connector { text-align: center; padding: 4px 0; color: #94a3b8; font-size: 18px; }
  .flow-props h3 { font-size: 13px; font-weight: 700; margin-bottom: 14px; color: #374151; }
  .flow-props label { margin-top: 10px; }
  .flow-props input, .flow-props select, .flow-props textarea { margin-bottom: 8px; }
  .skill-toggle.active { border-color: #2563eb; background: #eff6ff; color: #2563eb; }
  .int-status { display: inline-block; padding: 2px 8px; border-radius: 999px; font-size: 10px; font-weight: 600; margin-top: 8px; }
  .int-status.connected { background: #dcfce7; color: #15803d; }
  .int-status.disconnected { background: #f3f4f6; color: #6b7280; }
  .int-card .int-btn { margin-top: 10px; }
  td.fw { font-weight: 600; }
</style>
</head>
<body>

<!-- ===== Sidebar ===== -->
<div class="sidebar">
  <div class="sidebar-logo"><div class="icon">Z</div><span>Zzz Platform</span></div>
  <div class="nav-group">Uebersicht</div>
  <div class="nav-item" onclick="location.href='admin-dashboard.html'"><i class="fa-solid fa-gauge"></i> Dashboard</div>
  <div class="nav-group">AI & Automatisierung</div>
  <div class="nav-item active" onclick="location.href='ai-agent.html'"><i class="fa-solid fa-microchip"></i> AI Agents</div>
  <div class="nav-item" onclick="location.href='wissensdatenbank.html'"><i class="fa-solid fa-book"></i> Wissensdatenbank</div>
  <div class="nav-item" onclick="location.href='ansagen.html'"><i class="fa-solid fa-tower-broadcast"></i> Ansagen</div>
  <div class="nav-group">Callcenter</div>
  <div class="nav-item" onclick="location.href='agent-board.html'"><i class="fa-solid fa-headset"></i> Agent Board</div>
  <div class="nav-item" onclick="location.href='softphone.html'"><i class="fa-solid fa-phone"></i> Softphone</div>
  <div class="nav-item" onclick="location.href='agenten.html'"><i class="fa-solid fa-users-gear"></i> Agenten Verwaltung</div>
  <div class="nav-group">System</div>
  <div class="nav-item" onclick="location.href='auswertung.html'"><i class="fa-solid fa-chart-line"></i> Auswertungen</div>
  <div class="nav-item" onclick="location.href='benutzer.html'"><i class="fa-solid fa-user-gear"></i> Benutzer</div>
  <div class="nav-group"></div>
  <div class="nav-item" onclick="sessionStorage.removeItem('mr_guard_session');location.href='index.html'"><i class="fa-solid fa-right-from-bracket"></i> Abmelden</div>
</div>

<!-- ===== Main Content ===== -->
<div class="main">

  <div class="top-bar">
    <h1><i class="fa-solid fa-microchip"></i> AI Agents</h1>
    <div class="live-badge"><span class="live-dot"></span> System Online</div>
  </div>
  <div class="date-line">Verwaltung, Erstellung und Monitoring Ihrer AI-Agenten</div>

  <!-- ===== Tab Navigation ===== -->
  <div class="ai-tabs">
    <button class="ai-tab active" data-tab="galerie"><i class="fa-solid fa-grid-2"></i> Agent-Galerie</button>
    <button class="ai-tab" data-tab="builder"><i class="fa-solid fa-wand-magic-sparkles"></i> Agent Builder</button>
    <button class="ai-tab" data-tab="callflow"><i class="fa-solid fa-diagram-project"></i> Callflow Editor</button>
    <button class="ai-tab" data-tab="integrationen"><i class="fa-solid fa-plug"></i> Integrationen</button>
    <button class="ai-tab" data-tab="monitoring"><i class="fa-solid fa-chart-area"></i> Monitoring</button>
  </div>

  <!-- ============================================================ -->
  <!-- TAB 1: Agent-Galerie                                         -->
  <!-- ============================================================ -->
  <div class="ai-tab-content active" id="tab-galerie">

    <h2 style="font-size:16px;font-weight:700;margin-bottom:14px;"><i class="fa-solid fa-th"></i> Vorlagen-Galerie</h2>

    <div class="template-grid">

      <!-- 1 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(34,197,94,.12);color:#22c55e;"><i class="fa-solid fa-calendar-check"></i></div>
        <span class="t-badge" style="background:rgba(34,197,94,.12);color:#15803d;">Gesundheitswesen</span>
        <h4>Arzt Terminvergabe Hotline</h4>
        <p>Terminbuchung, Terminaenderung, Arzt-Info</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 2 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(99,102,241,.12);color:#6366f1;"><i class="fa-solid fa-file-invoice-dollar"></i></div>
        <span class="t-badge" style="background:rgba(99,102,241,.12);color:#6366f1;">Gesundheitswesen</span>
        <h4>Pat. Abrechnung Hotline</h4>
        <p>Behandlungsabrechnungen, Fragen zu Rechnungen</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 3 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(6,182,212,.12);color:#06b6d4;"><i class="fa-solid fa-hospital"></i></div>
        <span class="t-badge" style="background:rgba(6,182,212,.12);color:#06b6d4;">Gesundheitswesen</span>
        <h4>Klinik-Empfang</h4>
        <p>Allgemeine Klinik-Anfragen, Weiterleitung</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 4 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(37,99,235,.12);color:#2563eb;"><i class="fa-solid fa-headset"></i></div>
        <span class="t-badge" style="background:rgba(37,99,235,.12);color:#2563eb;">IT &amp; Support</span>
        <h4>IT Support Hotline</h4>
        <p>Ticket-Erstellung, Passwort-Reset, FAQ</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 5 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(139,92,246,.12);color:#8b5cf6;"><i class="fa-solid fa-life-ring"></i></div>
        <span class="t-badge" style="background:rgba(139,92,246,.12);color:#8b5cf6;">IT &amp; Support</span>
        <h4>Helpdesk Level 1</h4>
        <p>Erstanalyse, Kategorisierung, Eskalation</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 6 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(234,88,12,.12);color:#ea580c;"><i class="fa-solid fa-phone-volume"></i></div>
        <span class="t-badge" style="background:rgba(234,88,12,.12);color:#ea580c;">Buero</span>
        <h4>Allgemeine Telefonzentrale</h4>
        <p>Anrufannahme, Weiterleitung, Nachrichten</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 7 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(217,70,239,.12);color:#d946ef;"><i class="fa-solid fa-users"></i></div>
        <span class="t-badge" style="background:rgba(217,70,239,.12);color:#d946ef;">Buero</span>
        <h4>HR Service Hotline</h4>
        <p>Personalabteilung, Urlaubsanfragen</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 8 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(245,158,11,.12);color:#f59e0b;"><i class="fa-solid fa-face-smile"></i></div>
        <span class="t-badge" style="background:rgba(245,158,11,.12);color:#92400e;">Kundenservice</span>
        <h4>Kundenservice Standard</h4>
        <p>Allgemeiner Kundenservice</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 9 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(20,184,166,.12);color:#14b8a6;"><i class="fa-solid fa-box"></i></div>
        <span class="t-badge" style="background:rgba(20,184,166,.12);color:#14b8a6;">Kundenservice</span>
        <h4>Bestell-Hotline</h4>
        <p>Bestellstatus, Retouren</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

      <!-- 10 -->
      <div class="template-card">
        <div class="t-icon" style="background:rgba(239,68,68,.12);color:#ef4444;"><i class="fa-solid fa-triangle-exclamation"></i></div>
        <span class="t-badge" style="background:rgba(239,68,68,.12);color:#ef4444;">Notfall</span>
        <h4>Notfall-Hotline</h4>
        <p>Eskalation, Notfall-Routing</p>
        <div class="t-actions"><button class="btn btn-primary btn-sm btn-create-agent">Agent erstellen</button></div>
      </div>

    </div>

    <!-- Gespeicherte Agents -->
    <div class="card">
      <div class="card-header">
        <h2><i class="fa-solid fa-robot"></i> Gespeicherte Agents</h2>
        <button class="btn btn-primary btn-sm btn-create-agent"><i class="fa-solid fa-plus"></i> Neuer Agent</button>
      </div>
      <div class="card-body">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Branche</th>
                <th>Status</th>
                <th>Kanaele</th>
                <th>Aktionen</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="fw">Praxis-Terminbot</td>
                <td>Gesundheitswesen</td>
                <td><span class="badge badge-success">Aktiv</span></td>
                <td>Telefon, Webchat</td>
                <td>
                  <button class="btn btn-sm btn-primary"><i class="fa-solid fa-pen"></i> Bearbeiten</button>
                  <button class="btn btn-sm secondary"><i class="fa-solid fa-copy"></i> Duplizieren</button>
                  <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i> Loeschen</button>
                </td>
              </tr>
              <tr>
                <td class="fw">IT-Helpdesk Agent</td>
                <td>IT &amp; Support</td>
                <td><span class="badge badge-warning">Testing</span></td>
                <td>Telefon, MS Teams</td>
                <td>
                  <button class="btn btn-sm btn-primary"><i class="fa-solid fa-pen"></i> Bearbeiten</button>
                  <button class="btn btn-sm secondary"><i class="fa-solid fa-copy"></i> Duplizieren</button>
                  <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i> Loeschen</button>
                </td>
              </tr>
              <tr>
                <td class="fw">Empfangs-Zentrale</td>
                <td>Buero</td>
                <td><span class="badge badge-gray">Inaktiv</span></td>
                <td>Telefon</td>
                <td>
                  <button class="btn btn-sm btn-primary"><i class="fa-solid fa-pen"></i> Bearbeiten</button>
                  <button class="btn btn-sm secondary"><i class="fa-solid fa-copy"></i> Duplizieren</button>
                  <button class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i> Loeschen</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>

  <!-- ============================================================ -->
  <!-- TAB 2: Agent Builder                                         -->
  <!-- ============================================================ -->
  <div class="ai-tab-content" id="tab-builder" style="display:none">

    <!-- A) Grundeinstellungen -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-sliders"></i> Grundeinstellungen</h2></div>
      <div class="card-body">
        <div class="form-row-2">
          <div>
            <label>Agent-Name</label>
            <input type="text" placeholder="z.B. Praxis-Terminbot">
          </div>
          <div>
            <label>Status</label>
            <select>
              <option>Aktiv</option>
              <option>Inaktiv</option>
              <option>Testing</option>
            </select>
          </div>
        </div>
        <div>
          <label>Beschreibung</label>
          <textarea rows="3" placeholder="Beschreiben Sie den Zweck dieses Agents..."></textarea>
        </div>
        <div style="margin-top:12px;">
          <label>Branche</label>
          <select>
            <optgroup label="Gesundheitswesen">
              <option>Arztpraxis</option>
              <option>Klinik</option>
              <option>Apotheke</option>
            </optgroup>
            <optgroup label="IT &amp; Support">
              <option>IT Helpdesk</option>
              <option>Software Support</option>
            </optgroup>
            <optgroup label="Buero &amp; Verwaltung">
              <option>Telefonzentrale</option>
              <option>HR / Personal</option>
            </optgroup>
            <optgroup label="Kundenservice">
              <option>Allgemeiner Kundenservice</option>
              <option>Bestellservice</option>
              <option>Reklamation</option>
            </optgroup>
          </select>
        </div>
      </div>
    </div>

    <!-- B) Stimme & Persoenlichkeit -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-comment-dots"></i> Stimme &amp; Persoenlichkeit</h2></div>
      <div class="card-body">
        <div class="form-row-2">
          <div>
            <label>Stimme</label>
            <select>
              <option>Seraphina</option>
              <option>Florian</option>
              <option>Katja</option>
              <option>Conrad</option>
              <option>Marie</option>
            </select>
          </div>
          <div>
            <label>Hintergrundgeraeusch</label>
            <select>
              <option>Buero</option>
              <option>Callcenter</option>
              <option>Klinik</option>
              <option>Ruhig</option>
              <option>Keins</option>
            </select>
          </div>
        </div>
        <div>
          <label>Persoenlichkeit</label>
          <textarea rows="3" placeholder="Beschreiben Sie die Persoenlichkeit des Agents (z.B. freundlich, professionell, empathisch)..."></textarea>
        </div>
        <div class="form-row-2" style="margin-top:12px;">
          <div>
            <label>Begruessung</label>
            <input type="text" placeholder="z.B. Guten Tag, wie kann ich Ihnen helfen?">
          </div>
          <div>
            <label>Verabschiedung</label>
            <input type="text" placeholder="z.B. Vielen Dank fuer Ihren Anruf. Auf Wiedersehen!">
          </div>
        </div>
      </div>
    </div>

    <!-- C) Prompt & Wissen -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-terminal"></i> Prompt &amp; Wissen</h2></div>
      <div class="card-body">
        <div>
          <label>System-Prompt</label>
          <textarea rows="8" placeholder="Definieren Sie das Verhalten, die Rolle und die Aufgaben des AI-Agents..."></textarea>
        </div>
        <div style="margin-top:12px;">
          <label>Regeln &amp; Einschraenkungen</label>
          <textarea rows="4" placeholder="Welche Themen darf der Agent NICHT besprechen? Welche Grenzen gelten?"></textarea>
        </div>
        <div style="margin-top:12px;">
          <label>Kontext</label>
          <textarea rows="4" placeholder="Zusaetzlicher Kontext: Unternehmensinformationen, Oeffnungszeiten, etc."></textarea>
        </div>
        <div style="margin-top:12px;display:flex;align-items:center;gap:10px;">
          <input type="checkbox" id="kb-link" style="width:auto;">
          <label for="kb-link" style="margin:0;text-transform:none;letter-spacing:0;font-size:13px;">Wissensdatenbank verknuepfen</label>
          <a href="wissensdatenbank.html" style="font-size:12px;color:#2563eb;text-decoration:none;margin-left:4px;"><i class="fa-solid fa-external-link"></i> Oeffnen</a>
        </div>
      </div>
    </div>

    <!-- D) LLM-Konfiguration -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-brain"></i> LLM-Konfiguration</h2></div>
      <div class="card-body">
        <div class="form-row-2">
          <div>
            <label>LLM-Modell</label>
            <select>
              <option>Llama 3.1 70B</option>
              <option>Mistral Large</option>
              <option>GPT-4o</option>
              <option>Claude Sonnet 4</option>
            </select>
          </div>
          <div>
            <label>Max Tokens</label>
            <input type="number" value="2048" min="128" max="8192">
          </div>
        </div>
        <div class="form-row-2" style="margin-top:12px;">
          <div>
            <label>Temperatur: <span id="temp-val">0.7</span></label>
            <input type="range" min="0" max="1.5" step="0.1" value="0.7" oninput="document.getElementById('temp-val').textContent=this.value">
          </div>
          <div>
            <label>Top-P: <span id="topp-val">0.90</span></label>
            <input type="range" min="0" max="1" step="0.05" value="0.9" oninput="document.getElementById('topp-val').textContent=parseFloat(this.value).toFixed(2)">
          </div>
        </div>
      </div>
    </div>

    <!-- E) Faehigkeiten -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-puzzle-piece"></i> Faehigkeiten</h2></div>
      <div class="card-body">
        <div class="skills-grid">
          <div class="skill-toggle active"><i class="fa-solid fa-calendar-check"></i> Terminvergabe</div>
          <div class="skill-toggle active"><i class="fa-solid fa-arrows-turn-right"></i> Weiterleitung</div>
          <div class="skill-toggle active"><i class="fa-solid fa-book"></i> Wissensdatenbank</div>
          <div class="skill-toggle"><i class="fa-solid fa-triangle-exclamation"></i> Notfall-Erkennung</div>
          <div class="skill-toggle"><i class="fa-solid fa-phone-missed"></i> Rueckruf</div>
          <div class="skill-toggle"><i class="fa-solid fa-ticket"></i> Ticket erstellen</div>
          <div class="skill-toggle"><i class="fa-solid fa-envelope"></i> E-Mail senden</div>
          <div class="skill-toggle"><i class="fa-solid fa-database"></i> Daten abfragen</div>
          <div class="skill-toggle"><i class="fa-solid fa-arrow-up-right-from-square"></i> Eskalation</div>
          <div class="skill-toggle"><i class="fa-solid fa-file-lines"></i> Formulare</div>
          <div class="skill-toggle"><i class="fa-solid fa-shield-halved"></i> Authentifizierung</div>
          <div class="skill-toggle"><i class="fa-solid fa-language"></i> Live-Uebersetzung</div>
          <div class="skill-toggle"><i class="fa-solid fa-hashtag"></i> DTMF-Menue</div>
          <div class="skill-toggle"><i class="fa-solid fa-clock"></i> Warteschlange</div>
          <div class="skill-toggle"><i class="fa-solid fa-microphone"></i> Aufnahme</div>
          <div class="skill-toggle"><i class="fa-solid fa-voicemail"></i> Voicemail</div>
        </div>
      </div>
    </div>

    <!-- F) Einsatz-Kanaele -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-tower-broadcast"></i> Einsatz-Kanaele</h2></div>
      <div class="card-body">
        <div class="channel-grid">
          <div class="channel-card active">
            <i class="fa-solid fa-phone"></i>
            <span>Telefon / SIP</span>
            <small>Eingehende &amp; ausgehende Anrufe</small>
          </div>
          <div class="channel-card">
            <i class="fa-solid fa-comments"></i>
            <span>Webchat</span>
            <small>Website-Chat Widget</small>
          </div>
          <div class="channel-card">
            <i class="fa-brands fa-whatsapp"></i>
            <span>WhatsApp</span>
            <small>WhatsApp Business API</small>
          </div>
          <div class="channel-card">
            <i class="fa-brands fa-microsoft"></i>
            <span>MS Teams</span>
            <small>Microsoft Teams Integration</small>
          </div>
          <div class="channel-card">
            <i class="fa-solid fa-envelope"></i>
            <span>E-Mail</span>
            <small>Eingehende E-Mails</small>
          </div>
          <div class="channel-card">
            <i class="fa-solid fa-code"></i>
            <span>REST API</span>
            <small>Programmatischer Zugriff</small>
          </div>
        </div>
      </div>
    </div>

    <!-- G) Warteschlangen -->
    <div class="card">
      <div class="card-header"><h2><i class="fa-solid fa-layer-group"></i> Warteschlangen</h2></div>
      <div class="card-body">
        <div class="form-row-2">
          <div>
            <label>Queue (Mehrfachauswahl)</label>
            <select multiple size="4">
              <option>Queue-Allgemein</option>
              <option selected>Queue-Termine</option>
              <option>Queue-Support</option>
              <option>Queue-Notfall</option>
              <option>Queue-Abrechnung</option>
            </select>
          </div>
          <div>
            <label>Overflow Queue</label>
            <select>
              <option>-- Keine --</option>
              <option>Queue-Allgemein</option>
              <option>Queue-Support</option>
              <option>Queue-Notfall</option>
            </select>
          </div>
        </div>
        <div style="margin-top:12px;max-width:200px;">
          <label>Prioritaet</label>
          <input type="number" value="5" min="1" max="10">
        </div>
      </div>
    </div>

    <!-- Save/Cancel -->
    <div class="button-gruppe">
      <button class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> Agent speichern</button>
      <button class="btn secondary"><i class="fa-solid fa-xmark"></i> Abbrechen</button>
    </div>

  </div>

  <!-- ============================================================ -->
  <!-- TAB 3: Callflow Editor                                       -->
  <!-- ============================================================ -->
  <div class="ai-tab-content" id="tab-callflow" style="display:none">

    <!-- Mode Toggle -->
    <div class="mode-switch" style="width:fit-content;">
      <button class="mode-btn active-vb" data-mode="vb"><i class="fa-solid fa-microphone"></i> Voicebot</button>
      <button class="mode-btn" data-mode="cb"><i class="fa-solid fa-mouse-pointer"></i> Clickbot</button>
    </div>

    <div class="flow-workspace">

      <!-- Palette (left) -->
      <div class="flow-palette">
        <div class="pal-group">Steuerung</div>
        <div class="flow-chip" data-type="start"><span class="chip-dot" style="background:#22c55e;"></span> Start</div>
        <div class="flow-chip" data-type="end"><span class="chip-dot" style="background:#ef4444;"></span> Ende</div>
        <div class="flow-chip" data-type="condition"><span class="chip-dot" style="background:#f59e0b;"></span> Bedingung</div>
        <div class="flow-chip" data-type="variable"><span class="chip-dot" style="background:#6b7280;"></span> Variable setzen</div>
        <div class="flow-chip" data-type="hangup"><span class="chip-dot" style="background:#dc2626;"></span> Auflegen</div>

        <div class="pal-group">Kommunikation</div>
        <div class="flow-chip" data-type="greet"><span class="chip-dot" style="background:#6366f1;"></span> Begruessung</div>
        <div class="flow-chip" data-type="listen"><span class="chip-dot" style="background:#2563eb;"></span> Spracheingabe</div>
        <div class="flow-chip" data-type="dtmf"><span class="chip-dot" style="background:#8b5cf6;"></span> DTMF-Abfrage</div>
        <div class="flow-chip" data-type="ai"><span class="chip-dot" style="background:#0ea5e9;"></span> AI-Antwort</div>

        <div class="pal-group">Aktionen</div>
        <div class="flow-chip" data-type="queue"><span class="chip-dot" style="background:#14b8a6;"></span> Warteschlange</div>
        <div class="flow-chip" data-type="transfer"><span class="chip-dot" style="background:#ea580c;"></span> Weiterleitung</div>
        <div class="flow-chip" data-type="record"><span class="chip-dot" style="background:#d946ef;"></span> Aufnahme</div>
        <div class="flow-chip" data-type="email"><span class="chip-dot" style="background:#06b6d4;"></span> E-Mail senden</div>
        <div class="flow-chip" data-type="ticket"><span class="chip-dot" style="background:#f97316;"></span> Ticket erstellen</div>
        <div class="flow-chip" data-type="api"><span class="chip-dot" style="background:#64748b;"></span> API Call</div>
      </div>

      <!-- Canvas (center) -->
      <div class="flow-canvas">
        <div class="flow-canvas-inner">

          <div class="flow-block typ-start" data-block="start">
            <div class="flow-block-head">
              <div class="flow-block-icon"><i class="fa-solid fa-play"></i></div>
              <div class="flow-block-title">Start</div>
              <div class="flow-block-actions">
                <button title="Einstellungen"><i class="fa-solid fa-gear"></i></button>
                <button title="Loeschen"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
            <div class="flow-block-body" style="font-size:11px;color:#6b7280;">Anruf eingehend &ndash; Trigger</div>
          </div>

          <div class="flow-connector"><i class="fa-solid fa-arrow-down"></i></div>

          <div class="flow-block typ-greet" data-block="greet">
            <div class="flow-block-head">
              <div class="flow-block-icon"><i class="fa-solid fa-comment"></i></div>
              <div class="flow-block-title">Begruessung</div>
              <div class="flow-block-actions">
                <button title="Einstellungen"><i class="fa-solid fa-gear"></i></button>
                <button title="Loeschen"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
            <div class="flow-block-body" style="font-size:11px;color:#6b7280;">"Guten Tag, willkommen bei Zzz. Wie kann ich Ihnen helfen?"</div>
          </div>

          <div class="flow-connector"><i class="fa-solid fa-arrow-down"></i></div>

          <div class="flow-block typ-listen" data-block="ai-response">
            <div class="flow-block-head">
              <div class="flow-block-icon"><i class="fa-solid fa-robot"></i></div>
              <div class="flow-block-title">AI-Antwort</div>
              <div class="flow-block-actions">
                <button title="Einstellungen"><i class="fa-solid fa-gear"></i></button>
                <button title="Loeschen"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
            <div class="flow-block-body" style="font-size:11px;color:#6b7280;">LLM verarbeitet Anfrage und generiert Antwort</div>
          </div>

          <div class="flow-connector"><i class="fa-solid fa-arrow-down"></i></div>

          <div class="flow-block typ-end" data-block="end">
            <div class="flow-block-head">
              <div class="flow-block-icon"><i class="fa-solid fa-stop"></i></div>
              <div class="flow-block-title">Ende</div>
              <div class="flow-block-actions">
                <button title="Einstellungen"><i class="fa-solid fa-gear"></i></button>
                <button title="Loeschen"><i class="fa-solid fa-trash"></i></button>
              </div>
            </div>
            <div class="flow-block-body" style="font-size:11px;color:#6b7280;">Gespraech beenden &amp; Zusammenfassung</div>
          </div>

        </div>
      </div>

      <!-- Properties (right) -->
      <div class="flow-props" id="flow-properties">
        <h3><i class="fa-solid fa-gear"></i> Block-Eigenschaften</h3>
        <label>Block-Name</label>
        <input type="text" id="prop-name" value="Begruessung">
        <label>Block-Typ</label>
        <select id="prop-type">
          <option>Start</option>
          <option>Ende</option>
          <option selected>Begruessung</option>
          <option>Spracheingabe</option>
          <option>DTMF-Abfrage</option>
          <option>AI-Antwort</option>
          <option>Bedingung</option>
          <option>Warteschlange</option>
          <option>Weiterleitung</option>
          <option>Aufnahme</option>
          <option>E-Mail senden</option>
          <option>Ticket erstellen</option>
          <option>API Call</option>
          <option>Variable setzen</option>
          <option>Auflegen</option>
        </select>
        <label>Nachricht / Text</label>
        <textarea rows="4" id="prop-text">Guten Tag, willkommen bei Zzz. Wie kann ich Ihnen helfen?</textarea>
        <label>Stimme</label>
        <select>
          <option>Seraphina</option>
          <option>Florian</option>
          <option>Katja</option>
        </select>
        <label>Timeout (Sek.)</label>
        <input type="number" value="10" min="1" max="60">
        <label>Naechster Block</label>
        <select>
          <option>AI-Antwort</option>
          <option>Ende</option>
          <option>Warteschlange</option>
        </select>
        <div class="button-gruppe">
          <button class="btn btn-primary btn-sm"><i class="fa-solid fa-check"></i> Uebernehmen</button>
          <button class="btn secondary btn-sm"><i class="fa-solid fa-rotate-left"></i> Zuruecksetzen</button>
        </div>
      </div>

    </div>

  </div>

  <!-- ============================================================ -->
  <!-- TAB 4: Integrationen                                         -->
  <!-- ============================================================ -->
  <div class="ai-tab-content" id="tab-integrationen" style="display:none">

    <h2 style="font-size:16px;font-weight:700;margin-bottom:14px;"><i class="fa-solid fa-plug"></i> Verfuegbare Integrationen</h2>

    <div class="int-grid">

      <div class="int-card connected">
        <div class="int-card-icon" style="color:#2563eb;"><i class="fa-brands fa-jira"></i></div>
        <h4>JIRA</h4>
        <p>Ticket-Erstellung und -Verwaltung direkt aus Gespraechen</p>
        <span class="int-status connected">Verbunden</span>
        <div class="int-btn"><button class="btn btn-sm secondary" style="margin-top:10px;"><i class="fa-solid fa-gear"></i> Konfigurieren</button></div>
      </div>

      <div class="int-card connected">
        <div class="int-card-icon" style="color:#22c55e;"><i class="fa-solid fa-server"></i></div>
        <h4>ServiceNow</h4>
        <p>ITSM-Integration fuer Incident- und Change-Management</p>
        <span class="int-status connected">Verbunden</span>
        <div class="int-btn"><button class="btn btn-sm secondary" style="margin-top:10px;"><i class="fa-solid fa-gear"></i> Konfigurieren</button></div>
      </div>

      <div class="int-card">
        <div class="int-card-icon" style="color:#0ea5e9;"><i class="fa-solid fa-cloud"></i></div>
        <h4>Salesforce</h4>
        <p>CRM-Anbindung fuer Kundendaten und Case-Management</p>
        <span class="int-status disconnected">Nicht verbunden</span>
        <div class="int-btn"><button class="btn btn-sm btn-primary" style="margin-top:10px;"><i class="fa-solid fa-link"></i> Verbinden</button></div>
      </div>

      <div class="int-card connected">
        <div class="int-card-icon" style="color:#ea580c;"><i class="fa-solid fa-calendar"></i></div>
        <h4>Google Calendar</h4>
        <p>Terminbuchung und -verwaltung ueber Google Kalender</p>
        <span class="int-status connected">Verbunden</span>
        <div class="int-btn"><button class="btn btn-sm secondary" style="margin-top:10px;"><i class="fa-solid fa-gear"></i> Konfigurieren</button></div>
      </div>

      <div class="int-card">
        <div class="int-card-icon" style="color:#2563eb;"><i class="fa-brands fa-microsoft"></i></div>
        <h4>Microsoft 365</h4>
        <p>Outlook, Teams und SharePoint Integration</p>
        <span class="int-status disconnected">Nicht verbunden</span>
        <div class="int-btn"><button class="btn btn-sm btn-primary" style="margin-top:10px;"><i class="fa-solid fa-link"></i> Verbinden</button></div>
      </div>

      <div class="int-card">
        <div class="int-card-icon" style="color:#14b8a6;"><i class="fa-solid fa-headset"></i></div>
        <h4>Freshdesk</h4>
        <p>Helpdesk-Ticketing und Kundenservice-Plattform</p>
        <span class="int-status disconnected">Nicht verbunden</span>
        <div class="int-btn"><button class="btn btn-sm btn-primary" style="margin-top:10px;"><i class="fa-solid fa-link"></i> Verbinden</button></div>
      </div>

      <div class="int-card">
        <div class="int-card-icon" style="color:#6366f1;"><i class="fa-solid fa-life-ring"></i></div>
        <h4>Zendesk</h4>
        <p>Kundenservice- und Support-Plattform</p>
        <span class="int-status disconnected">Nicht verbunden</span>
        <div class="int-btn"><button class="btn btn-sm btn-primary" style="margin-top:10px;"><i class="fa-solid fa-link"></i> Verbinden</button></div>
      </div>

      <div class="int-card connected">
        <div class="int-card-icon" style="color:#e11d48;"><i class="fa-brands fa-slack"></i></div>
        <h4>Slack</h4>
        <p>Benachrichtigungen und Eskalationen via Slack</p>
        <span class="int-status connected">Verbunden</span>
        <div class="int-btn"><button class="btn btn-sm secondary" style="margin-top:10px;"><i class="fa-solid fa-gear"></i> Konfigurieren</button></div>
      </div>

      <div class="int-card">
        <div class="int-card-icon" style="color:#64748b;"><i class="fa-solid fa-code"></i></div>
        <h4>Custom API</h4>
        <p>Eigene REST/GraphQL API-Anbindung konfigurieren</p>
        <span class="int-status disconnected">Nicht verbunden</span>
        <div class="int-btn"><button class="btn btn-sm btn-primary" style="margin-top:10px;"><i class="fa-solid fa-link"></i> Verbinden</button></div>
      </div>

    </div>

  </div>

  <!-- ============================================================ -->
  <!-- TAB 5: Monitoring                                            -->
  <!-- ============================================================ -->
  <div class="ai-tab-content" id="tab-monitoring" style="display:none">

    <h2 style="font-size:16px;font-weight:700;margin-bottom:14px;"><i class="fa-solid fa-chart-area"></i> Agent-Monitoring</h2>

    <!-- KPI Grid -->
    <div class="kpi-grid" style="margin-bottom:24px;">
      <div class="kpi">
        <div class="kpi-header">
          <span class="kpi-label">Gespraeche heute</span>
          <div class="kpi-icon blue"><i class="fa-solid fa-phone"></i></div>
        </div>
        <div class="kpi-value">247</div>
        <div class="kpi-sub">+18% ggue. Vortag</div>
      </div>
      <div class="kpi">
        <div class="kpi-header">
          <span class="kpi-label">Erfolgsquote</span>
          <div class="kpi-icon green"><i class="fa-solid fa-check-circle"></i></div>
        </div>
        <div class="kpi-value">89.3%</div>
        <div class="kpi-sub">Erfolgreich abgeschlossen</div>
      </div>
      <div class="kpi">
        <div class="kpi-header">
          <span class="kpi-label">Avg. Dauer</span>
          <div class="kpi-icon purple"><i class="fa-solid fa-clock"></i></div>
        </div>
        <div class="kpi-value">2:34</div>
        <div class="kpi-sub">Minuten pro Gespraech</div>
      </div>
      <div class="kpi">
        <div class="kpi-header">
          <span class="kpi-label">Eskalationen</span>
          <div class="kpi-icon orange"><i class="fa-solid fa-arrow-up-right-from-square"></i></div>
        </div>
        <div class="kpi-value">12</div>
        <div class="kpi-sub">An Mensch weitergeleitet</div>
      </div>
      <div class="kpi">
        <div class="kpi-header">
          <span class="kpi-label">Zufriedenheit</span>
          <div class="kpi-icon red"><i class="fa-solid fa-star"></i></div>
        </div>
        <div class="kpi-value">4.6</div>
        <div class="kpi-sub">von 5.0 Sternen</div>
      </div>
    </div>

    <!-- Monitor Cards -->
    <h2 style="font-size:14px;font-weight:700;margin-bottom:12px;"><i class="fa-solid fa-robot"></i> Aktive Agents</h2>
    <div class="monitor-grid" style="margin-bottom:24px;">
      <div class="monitor-card">
        <div class="m-header">
          <span class="m-name">Praxis-Terminbot</span>
          <span class="m-status badge badge-success">Online</span>
        </div>
        <div class="m-stats">
          <div class="m-stat"><div class="m-stat-val">89</div><div class="m-stat-label">Gespraeche</div></div>
          <div class="m-stat"><div class="m-stat-val">94%</div><div class="m-stat-label">Erfolg</div></div>
          <div class="m-stat"><div class="m-stat-val">1:52</div><div class="m-stat-label">Avg. Dauer</div></div>
          <div class="m-stat"><div class="m-stat-val">3</div><div class="m-stat-label">Eskalationen</div></div>
        </div>
      </div>
      <div class="monitor-card">
        <div class="m-header">
          <span class="m-name">IT-Helpdesk Agent</span>
          <span class="m-status badge badge-success">Online</span>
        </div>
        <div class="m-stats">
          <div class="m-stat"><div class="m-stat-val">63</div><div class="m-stat-label">Gespraeche</div></div>
          <div class="m-stat"><div class="m-stat-val">87%</div><div class="m-stat-label">Erfolg</div></div>
          <div class="m-stat"><div class="m-stat-val">3:15</div><div class="m-stat-label">Avg. Dauer</div></div>
          <div class="m-stat"><div class="m-stat-val">5</div><div class="m-stat-label">Eskalationen</div></div>
        </div>
      </div>
      <div class="monitor-card">
        <div class="m-header">
          <span class="m-name">Empfangs-Zentrale</span>
          <span class="m-status badge badge-warning">Testing</span>
        </div>
        <div class="m-stats">
          <div class="m-stat"><div class="m-stat-val">41</div><div class="m-stat-label">Gespraeche</div></div>
          <div class="m-stat"><div class="m-stat-val">78%</div><div class="m-stat-label">Erfolg</div></div>
          <div class="m-stat"><div class="m-stat-val">2:08</div><div class="m-stat-label">Avg. Dauer</div></div>
          <div class="m-stat"><div class="m-stat-val">4</div><div class="m-stat-label">Eskalationen</div></div>
        </div>
      </div>
      <div class="monitor-card">
        <div class="m-header">
          <span class="m-name">Kundenservice Bot</span>
          <span class="m-status badge badge-success">Online</span>
        </div>
        <div class="m-stats">
          <div class="m-stat"><div class="m-stat-val">38</div><div class="m-stat-label">Gespraeche</div></div>
          <div class="m-stat"><div class="m-stat-val">92%</div><div class="m-stat-label">Erfolg</div></div>
          <div class="m-stat"><div class="m-stat-val">2:45</div><div class="m-stat-label">Avg. Dauer</div></div>
          <div class="m-stat"><div class="m-stat-val">0</div><div class="m-stat-label">Eskalationen</div></div>
        </div>
      </div>
      <div class="monitor-card">
        <div class="m-header">
          <span class="m-name">Notfall-Router</span>
          <span class="m-status badge badge-info">Standby</span>
        </div>
        <div class="m-stats">
          <div class="m-stat"><div class="m-stat-val">16</div><div class="m-stat-label">Gespraeche</div></div>
          <div class="m-stat"><div class="m-stat-val">100%</div><div class="m-stat-label">Erfolg</div></div>
          <div class="m-stat"><div class="m-stat-val">0:48</div><div class="m-stat-label">Avg. Dauer</div></div>
          <div class="m-stat"><div class="m-stat-val">16</div><div class="m-stat-label">Eskalationen</div></div>
        </div>
      </div>
    </div>

    <!-- Letzte Gespraeche Table -->
    <div class="card">
      <div class="card-header">
        <h2><i class="fa-solid fa-clock-rotate-left"></i> Letzte Gespraeche</h2>
      </div>
      <div class="card-body">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Agent</th>
                <th>Anrufer</th>
                <th>Dauer</th>
                <th>Status</th>
                <th>Datum</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="fw">Praxis-Terminbot</td>
                <td>+49 30 1234567</td>
                <td>2:14</td>
                <td><span class="badge badge-success">Erfolgreich</span></td>
                <td>01.03.2026 14:32</td>
              </tr>
              <tr>
                <td class="fw">IT-Helpdesk Agent</td>
                <td>+49 89 9876543</td>
                <td>4:08</td>
                <td><span class="badge badge-warning">Eskaliert</span></td>
                <td>01.03.2026 14:18</td>
              </tr>
              <tr>
                <td class="fw">Empfangs-Zentrale</td>
                <td>+49 40 5551234</td>
                <td>1:47</td>
                <td><span class="badge badge-success">Erfolgreich</span></td>
                <td>01.03.2026 14:05</td>
              </tr>
              <tr>
                <td class="fw">Kundenservice Bot</td>
                <td>+49 221 7778888</td>
                <td>3:22</td>
                <td><span class="badge badge-success">Erfolgreich</span></td>
                <td>01.03.2026 13:51</td>
              </tr>
              <tr>
                <td class="fw">Notfall-Router</td>
                <td>+49 69 1112222</td>
                <td>0:38</td>
                <td><span class="badge badge-info">Weitergeleitet</span></td>
                <td>01.03.2026 13:42</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>

</div><!-- /main -->

<!-- ===== JavaScript ===== -->
<script>
(function() {

  // --- Tab Switching ---
  var tabs = document.querySelectorAll('.ai-tab');
  var contents = document.querySelectorAll('.ai-tab-content');

  tabs.forEach(function(tab) {
    tab.addEventListener('click', function() {
      var target = this.getAttribute('data-tab');

      tabs.forEach(function(t) { t.classList.remove('active'); });
      this.classList.add('active');

      contents.forEach(function(c) {
        if (c.id === 'tab-' + target) {
          c.style.display = 'block';
          c.classList.add('active');
        } else {
          c.style.display = 'none';
          c.classList.remove('active');
        }
      });
    });
  });

  // --- Skill Toggle ---
  document.querySelectorAll('.skill-toggle').forEach(function(el) {
    el.addEventListener('click', function() {
      this.classList.toggle('active');
    });
  });

  // --- Channel Card Toggle ---
  document.querySelectorAll('.channel-card').forEach(function(el) {
    el.addEventListener('click', function() {
      this.classList.toggle('active');
    });
  });

  // --- Template "Agent erstellen" -> switch to Builder tab ---
  document.querySelectorAll('.btn-create-agent').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      var builderTab = document.querySelector('.ai-tab[data-tab="builder"]');
      if (builderTab) builderTab.click();
    });
  });

  // --- Callflow Block Click -> show properties ---
  document.querySelectorAll('.flow-block').forEach(function(block) {
    block.addEventListener('click', function() {
      document.querySelectorAll('.flow-block').forEach(function(b) {
        b.style.boxShadow = '';
      });
      this.style.boxShadow = '0 0 0 3px rgba(37,99,235,.3)';

      var title = this.querySelector('.flow-block-title');
      var body = this.querySelector('.flow-block-body');
      var propName = document.getElementById('prop-name');
      var propText = document.getElementById('prop-text');
      var propType = document.getElementById('prop-type');

      if (propName && title) propName.value = title.textContent;
      if (propText && body) propText.value = body.textContent;
      if (propType && title) {
        for (var i = 0; i < propType.options.length; i++) {
          if (propType.options[i].text === title.textContent) {
            propType.selectedIndex = i;
            break;
          }
        }
      }
    });
  });

  // --- Mode Switch (Voicebot / Clickbot) ---
  document.querySelectorAll('.mode-btn').forEach(function(btn) {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.mode-btn').forEach(function(b) {
        b.classList.remove('active-vb', 'active-cb');
      });
      if (this.getAttribute('data-mode') === 'vb') {
        this.classList.add('active-vb');
      } else {
        this.classList.add('active-cb');
      }
    });
  });

})();
</script>

</body>
</html>

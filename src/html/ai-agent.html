<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MED Rezeption - AI Agent Engineering</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo"><h2>MED Rezeption</h2><small>Praxisverwaltung</small></div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="fa-solid fa-chart-pie nav-icon"></i> Dashboard</a>
            <a href="patienten.html"><i class="fa-solid fa-users nav-icon"></i> Patienten</a>
            <a href="aerzte.html"><i class="fa-solid fa-user-doctor nav-icon"></i> Aerzte</a>
            <a href="termine.html"><i class="fa-solid fa-calendar-days nav-icon"></i> Termine</a>
            <a href="wartezimmer.html"><i class="fa-solid fa-couch nav-icon"></i> Wartezimmer</a>
            <a href="wissensdatenbank.html"><i class="fa-solid fa-book nav-icon"></i> Wissensdatenbank</a>
            <a href="ansagen.html"><i class="fa-solid fa-tower-broadcast nav-icon"></i> Ansagen Generator</a>
            <a href="auswertung.html"><i class="fa-solid fa-chart-line nav-icon"></i> Auswertungen</a>
            <a href="standort.html"><i class="fa-solid fa-building nav-icon"></i> Standort &amp; ACD</a>
            <a href="callflow.html"><i class="fa-solid fa-diagram-project nav-icon"></i> Callflow Editor</a>
            <a href="voicebot.html"><i class="fa-solid fa-robot nav-icon"></i> Voicebot</a>
            <a href="agenten.html"><i class="fa-solid fa-headset nav-icon"></i> Agenten</a>
            <a href="softphone.html"><i class="fa-solid fa-phone nav-icon"></i> Softphone</a>
            <a href="uebersetzung.html"><i class="fa-solid fa-language nav-icon"></i> Uebersetzer</a>
            <a href="ai-agent.html" class="active"><i class="fa-solid fa-microchip nav-icon"></i> AI Agent Engineering</a>
            <a href="benutzer.html"><i class="fa-solid fa-user-gear nav-icon"></i> Benutzer</a>
        </nav>
        <div class="sidebar-footer"><button id="btn-demo-reset" type="button">Demo zuruecksetzen</button></div>
    </aside>
    <div class="main-wrapper">
        <header class="topbar">
            <button id="menu-toggle" type="button"><i class="fa-solid fa-bars"></i></button>
            <h1>AI Agent Engineering</h1>
            <div class="topbar-right">Demo-Modus</div>
        </header>
        <main id="ai-agent">

            <!-- ===== Tab-Navigation ===== -->
            <div class="ai-tabs">
                <button class="ai-tab active" data-tab="builder"><i class="fa-solid fa-wand-magic-sparkles"></i> Agent Builder</button>
                <button class="ai-tab" data-tab="prompts"><i class="fa-solid fa-terminal"></i> Prompt Engineering</button>
                <button class="ai-tab" data-tab="monitoring"><i class="fa-solid fa-chart-bar"></i> Monitoring &amp; Logs</button>
            </div>

            <!-- ===== TAB 1: Agent Builder ===== -->
            <div class="ai-tab-content active" id="tab-builder">

                <div class="card">
                    <h3><i class="fa-solid fa-wand-magic-sparkles"></i> Neuen AI-Agent erstellen</h3>
                    <form id="agent-builder-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ab-name">Agent-Name</label>
                                <input type="text" id="ab-name" placeholder="z.B. Praxis-Rezeptionistin" required>
                            </div>
                            <div class="form-group">
                                <label for="ab-branche">Branche</label>
                                <select id="ab-branche">
                                    <option value="arztpraxis">Arztpraxis</option>
                                    <option value="zahnarzt">Zahnarztpraxis</option>
                                    <option value="anwalt">Rechtsanwaltskanzlei</option>
                                    <option value="steuerberater">Steuerberatungsbuero</option>
                                    <option value="friseur">Friseursalon</option>
                                    <option value="werkstatt">KFZ-Werkstatt</option>
                                    <option value="tierarzt">Tierarztpraxis</option>
                                    <option value="allgemein">Allgemeines Buero</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ab-stimme">Stimme</label>
                                <select id="ab-stimme"></select>
                            </div>
                            <div class="form-group">
                                <label for="ab-hintergrund">Hintergrundgeraeusch</label>
                                <select id="ab-hintergrund">
                                    <option value="buero">Buero / Empfang</option>
                                    <option value="praxis">Arztpraxis</option>
                                    <option value="ruhig">Sehr ruhig</option>
                                    <option value="keine">Kein Hintergrund</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="ab-persoenlichkeit">Persoenlichkeit &amp; Verhalten</label>
                            <textarea id="ab-persoenlichkeit" rows="3" placeholder="z.B. Freundlich, professionell, spricht Anrufer mit Sie an, nutzt Fuellwoerter wie 'Ach so' und 'Alles klar'"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ab-begruessung">Begruessung</label>
                            <input type="text" id="ab-begruessung" placeholder="z.B. Guten Tag, Praxis Dr. Mueller, wie kann ich Ihnen helfen?">
                        </div>
                        <div class="form-group">
                            <label for="ab-regeln">Regeln &amp; Einschraenkungen</label>
                            <textarea id="ab-regeln" rows="3" placeholder="z.B. Keine medizinischen Diagnosen stellen. Bei Notfaellen sofort 112 empfehlen. Maximal 3 Fragen pro Gespraech."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ab-llm-model">LLM-Modell</label>
                                <select id="ab-llm-model">
                                    <option value="llama3.1:8b-instruct-q4_K_M">Llama 3.1 8B (Standard)</option>
                                    <option value="llama3.1:70b-instruct-q4_K_M">Llama 3.1 70B (Premium)</option>
                                    <option value="mistral:7b-instruct-q4_K_M">Mistral 7B</option>
                                    <option value="gemma2:9b-instruct-q4_K_M">Gemma 2 9B</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ab-temperatur">Temperatur: <span id="ab-temp-wert">0.7</span></label>
                                <input type="range" id="ab-temperatur" min="0" max="1.5" step="0.1" value="0.7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Faehigkeiten</label>
                            <div class="ai-skills-grid">
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-termine" checked> <i class="fa-solid fa-calendar-check"></i> Terminvergabe</label>
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-rezept" checked> <i class="fa-solid fa-prescription"></i> Rezeptbestellung</label>
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-weiterleitung" checked> <i class="fa-solid fa-phone-flip"></i> Weiterleitung</label>
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-kb"> <i class="fa-solid fa-book-medical"></i> Wissensdatenbank</label>
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-rueckruf"> <i class="fa-solid fa-phone-arrow-up-right"></i> Rueckruf-Angebot</label>
                                <label class="ai-skill-toggle"><input type="checkbox" id="ab-skill-notfall" checked> <i class="fa-solid fa-triangle-exclamation"></i> Notfall-Erkennung</label>
                            </div>
                        </div>
                        <div class="button-gruppe">
                            <button type="submit" class="btn-primary"><i class="fa-solid fa-floppy-disk"></i> Agent speichern</button>
                            <button type="button" id="ab-testen" class="btn-secondary"><i class="fa-solid fa-flask"></i> Agent testen</button>
                        </div>
                    </form>
                    <div id="ab-erfolg" class="erfolg-meldung" hidden></div>
                </div>

                <!-- Gespeicherte Agents -->
                <div class="card">
                    <h3><i class="fa-solid fa-robot"></i> Gespeicherte AI-Agents</h3>
                    <div class="table-container">
                        <table id="ai-agents-tabelle">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Branche</th>
                                    <th>Stimme</th>
                                    <th>Modell</th>
                                    <th>Status</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ===== TAB 2: Prompt Engineering ===== -->
            <div class="ai-tab-content" id="tab-prompts">

                <div class="card">
                    <h3><i class="fa-solid fa-terminal"></i> System-Prompt Editor</h3>
                    <div class="form-group">
                        <label for="pe-agent-select">Agent auswaehlen</label>
                        <select id="pe-agent-select"><option value="">— Agent waehlen —</option></select>
                    </div>
                    <div class="form-group">
                        <label for="pe-system-prompt">System-Prompt</label>
                        <textarea id="pe-system-prompt" rows="10" placeholder="Der System-Prompt definiert das gesamte Verhalten des AI-Agents..." class="ai-code-editor"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pe-kontext">Zusaetzlicher Kontext (Branchen-spezifisch)</label>
                            <textarea id="pe-kontext" rows="5" placeholder="Spezifische Infos fuer den Agent: Oeffnungszeiten, Aerzte, Leistungen..." class="ai-code-editor"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="pe-regeln">Prompt-Regeln (wird ans Ende angehaengt)</label>
                            <textarea id="pe-regeln" rows="5" placeholder="WICHTIG fuer dein Verhalten am Telefon:&#10;- Antworte KURZ (1-3 Saetze)&#10;- Stelle eine Frage pro Antwort" class="ai-code-editor"></textarea>
                        </div>
                    </div>
                    <div class="button-gruppe">
                        <button type="button" id="pe-speichern" class="btn-primary"><i class="fa-solid fa-floppy-disk"></i> Prompt speichern</button>
                        <button type="button" id="pe-zuruecksetzen" class="btn-secondary"><i class="fa-solid fa-rotate-left"></i> Standard wiederherstellen</button>
                    </div>
                    <div id="pe-erfolg" class="erfolg-meldung" hidden></div>
                </div>

                <!-- Test-Chat -->
                <div class="card">
                    <h3><i class="fa-solid fa-flask"></i> Prompt testen (Testgespraech)</h3>
                    <div id="pe-test-chat" class="ai-test-chat">
                        <div id="pe-chat-verlauf" class="ai-chat-verlauf"></div>
                        <div class="ai-chat-eingabe">
                            <input type="text" id="pe-chat-input" placeholder="Nachricht eingeben (simuliert Anrufer)...">
                            <button type="button" id="pe-chat-senden"><i class="fa-solid fa-paper-plane"></i></button>
                        </div>
                    </div>
                    <div class="ai-chat-meta">
                        <span id="pe-chat-tokens">Tokens: —</span>
                        <span id="pe-chat-latenz">Latenz: —</span>
                        <button type="button" id="pe-chat-leeren" class="btn-text"><i class="fa-solid fa-trash"></i> Chat leeren</button>
                    </div>
                </div>

                <!-- Prompt-Vorlagen -->
                <div class="card">
                    <h3><i class="fa-solid fa-copy"></i> Prompt-Vorlagen</h3>
                    <div id="pe-vorlagen" class="ai-vorlagen-grid"></div>
                </div>
            </div>

            <!-- ===== TAB 3: Monitoring & Logs ===== -->
            <div class="ai-tab-content" id="tab-monitoring">

                <!-- KPIs -->
                <div class="stat-grid ai-stat-grid">
                    <div class="stat-card">
                        <div class="stat-label">Gespraeche heute</div>
                        <div class="stat-value" id="mon-gespraeche">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Durchschn. Latenz</div>
                        <div class="stat-value" id="mon-latenz">— ms</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Erfolgsquote</div>
                        <div class="stat-value" id="mon-erfolg">— %</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Aktive Sessions</div>
                        <div class="stat-value" id="mon-sessions">0</div>
                    </div>
                </div>

                <!-- Letzte Gespraeche -->
                <div class="card">
                    <h3><i class="fa-solid fa-list"></i> Letzte Gespraeche</h3>
                    <div class="table-container">
                        <table id="mon-gespraeche-tabelle">
                            <thead>
                                <tr>
                                    <th>Zeit</th>
                                    <th>Kanal</th>
                                    <th>Agent</th>
                                    <th>Dauer</th>
                                    <th>Nachrichten</th>
                                    <th>Status</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Live-Transkript -->
                <div class="card">
                    <h3><i class="fa-solid fa-scroll"></i> Transkript</h3>
                    <div id="mon-transkript" class="ai-transkript">
                        <p class="ai-transkript-leer">Gespraech auswaehlen um Transkript anzuzeigen...</p>
                    </div>
                </div>

                <!-- System-Status -->
                <div class="card">
                    <h3><i class="fa-solid fa-server"></i> System-Status</h3>
                    <div class="ai-system-status">
                        <div class="ai-status-item">
                            <span class="ai-status-dot" id="mon-llm-dot"></span>
                            <span>LLM (Ollama)</span>
                            <span id="mon-llm-info" class="ai-status-detail">pruefen...</span>
                        </div>
                        <div class="ai-status-item">
                            <span class="ai-status-dot" id="mon-stt-dot"></span>
                            <span>STT (Whisper)</span>
                            <span id="mon-stt-info" class="ai-status-detail">pruefen...</span>
                        </div>
                        <div class="ai-status-item">
                            <span class="ai-status-dot" id="mon-tts-dot"></span>
                            <span>TTS (Edge)</span>
                            <span id="mon-tts-info" class="ai-status-detail">pruefen...</span>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <button id="chat-toggle" type="button"><i class="fa-solid fa-comment-dots"></i></button>
    <div id="chat-fenster">
        <div class="chat-header"><span><i class="fa-solid fa-robot"></i> Praxis-Assistent</span><button id="chat-schliessen" type="button"><i class="fa-solid fa-xmark"></i></button></div>
        <div id="chat-nachrichten"></div>
        <div class="chat-eingabe">
            <input id="chat-input" type="text" placeholder="Frage stellen oder sprechen...">
            <button id="chat-mikrofon" type="button" title="Sprechen"><i class="fa-solid fa-microphone"></i></button>
            <button id="chat-senden" type="button"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
